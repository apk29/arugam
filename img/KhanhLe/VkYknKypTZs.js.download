if (self.CavalryLogger) { CavalryLogger.start_js(["cfPEV"]); }

__d("ReactComposerJSONCollageLayoutData",[],(function(a,b,c,d,e,f){e.exports={1:[{validActors:3,photoLayouts:[[0,1,1,0]]}],2:[{validActors:3,photoLayouts:[[0,3,3,0],[0,6,3,3]]},{validActors:3,photoLayouts:[[0,6,3,0],[3,6,6,0]]},{validActors:3,photoLayouts:[[0,3,6,0],[0,6,6,3]]},{validActors:1,photoLayouts:[[0,6,2,0],[2,6,4,0]]}],3:[{validActors:3,photoLayouts:[[0,6,3,0],[3,3,6,0],[3,6,6,3]]},{validActors:3,photoLayouts:[[0,3,6,0],[0,6,3,3],[3,6,6,3]]},{validActors:2,photoLayouts:[[0,2,2,0],[0,4,2,2],[0,6,2,4]]},{validActors:1,photoLayouts:[[0,6,4,0],[4,3,6,0],[4,6,6,3]]},{validActors:1,photoLayouts:[[0,4,6,0],[0,6,3,4],[3,6,6,4]]},{validActors:1,photoLayouts:[[0,6,2,0],[2,6,4,0],[4,6,6,0]]},{validActors:1,photoLayouts:[[0,2,6,0],[0,4,6,2],[0,6,6,4]]}],4:[{validActors:3,photoLayouts:[[0,3,3,0],[0,6,3,3],[3,3,6,0],[3,6,6,3]]},{validActors:3,photoLayouts:[[0,6,4,0],[4,2,6,0],[4,4,6,2],[4,6,6,4]]},{validActors:3,photoLayouts:[[0,4,6,0],[0,6,2,4],[2,6,4,4],[4,6,6,4]]}],5:[{validActors:1,photoLayouts:[[0,3,3,0],[3,3,6,0],[0,6,2,3],[2,6,4,3],[4,6,6,3]]},{validActors:1,photoLayouts:[[0,3,3,0],[0,6,3,3],[3,2,5,0],[3,4,5,2],[3,6,5,4]]}]}}),null);
__d("DocumentUploadConfig",["DocumentUploadConfigInitialData"],(function(a,b,c,d,e,f){a={isSupported:function(a){if(!a)return!1;return b("DocumentUploadConfigInitialData").CONTENT_TYPES.length<=0?!1:b("DocumentUploadConfigInitialData").CONTENT_TYPES.includes(a)}};e.exports=a}),null);
__d("ComposerXDragDropUtils",["csx","Arbiter","CSS","DocumentUploadConfig","DOMQuery","Parent","VideoUploadFeatureDetector"],(function(a,b,c,d,e,f,g){__p&&__p();a={handleDragEnterAndLeave:function(a){var c=b("DOMQuery").scry(b("Parent").bySelector(a,"._119"),"._2wr");b("Arbiter").subscribe("dragenter",function(d,e){a==e.element&&c.forEach(b("CSS").hide)});b("Arbiter").subscribe("dragleave",function(d,e){a==e.element&&c.forEach(b("CSS").show)})},filterImages:function(a){var c=b("VideoUploadFeatureDetector").supportsFileAPI(),d=[];for(var e=0;e<a.length;e++){var f=a[e];f.type.match("image/*")?d.push(f):c&&f.type.match("video/*")?d.push(f):b("DocumentUploadConfig").isSupported(f.type)&&d.push(f)}return d}};e.exports=a}),null);
__d("XReactComposerLoggingODSController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/react_composer/logging/ods/",{attachment_type:{type:"String"},composer_type:{type:"Enum",required:!0,enumType:1},event:{type:"String",required:!0}})}),null);
__d("ReactComposerAttachmentLoader",["AsyncRequest","ReactComposerAttachmentActions","ReactComposerAttachmentInitState","ReactComposerAttachmentStore","ReactComposerStore","XReactComposerLoggingODSController"],(function(a,b,c,d,e,f){__p&&__p();a={load:function(a,c,d,e){__p&&__p();var f=b("ReactComposerAttachmentStore").getAttachment(a,c);if(!f||f.initState===b("ReactComposerAttachmentInitState").INITIALIZED)return;b("ReactComposerAttachmentActions").setInitialized(a,c);this._logToODS(a,"bootload_start",c);d(function(d,e){this._logToODS(a,"bootload_done",c),b("ReactComposerAttachmentActions").setBootloaded(a,c,d,e)}.bind(this));this._logToODS(a,"bootstrap_start",c);new(b("AsyncRequest"))(e).setHandler(function(){this._logToODS(a,"bootstrap_done",c),setTimeout(function(){return b("ReactComposerAttachmentActions").setBootstrapped(a,c)},0)}.bind(this)).send()},_logToODS:function(a,c,d){c=b("XReactComposerLoggingODSController").getURIBuilder().setString("event",c).setString("attachment_type",d).setEnum("composer_type",b("ReactComposerStore").getRef(a)).getURI();new(b("AsyncRequest"))(c).send()}};e.exports=a}),null);
__d("ReactComposerAttachmentPlaceholder.react",["cx","React","XUISpinner.react","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){var a=b("joinClasses")(this.props.className,"_2nt-");return b("React").createElement("div",{className:a},b("React").createElement(b("XUISpinner.react"),{className:"_2nt_",size:"large"}))};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("ReactComposerHeaderType",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({NONE:"NONE",DEFAULT:"DEFAULT",SHARESHEET:"SHARESHEET",SHARING_SPACES:"SHARING_SPACES"});e.exports=a}),null);
__d("ReactComposerPostToGroupActionType",["keyMirrorRecursive"],(function(a,b,c,d,e,f){e.exports=b("keyMirrorRecursive")({SELECT_TAB:null,UNSELECT_TAB:null,UPDATE_SELECTED_GROUP:null,CLOSE_NUX:null,LOG_EVENT:null},"ReactComposerPostToGroupActionType")}),null);
__d("XReactComposerPostToGroupLoggingODSController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/react_composer/logging/post_to_group/ods/",{event:{type:"String",required:!0}})}),null);
__d("ReactComposerPostToGroupStore",["AsyncRequest","ReactComposerPostToGroupActionType","ReactComposerStoreBase","XReactComposerPostToGroupLoggingODSController"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("ReactComposerStoreBase"));g=c&&c.prototype;function a(){"use strict";__p&&__p();var a;g.constructor.call(this,function(){return{isTabSelected:!1,selectedGroup:null,showNux:!0}},function(c){__p&&__p();switch(c.type){case b("ReactComposerPostToGroupActionType").SELECT_TAB:a&&a.$ReactComposerPostToGroupStore1(c,!0);break;case b("ReactComposerPostToGroupActionType").UNSELECT_TAB:a&&a.$ReactComposerPostToGroupStore1(c,!1);break;case b("ReactComposerPostToGroupActionType").UPDATE_SELECTED_GROUP:a&&a.$ReactComposerPostToGroupStore2(c);break;case b("ReactComposerPostToGroupActionType").CLOSE_NUX:a&&a.$ReactComposerPostToGroupStore3(c);break;case b("ReactComposerPostToGroupActionType").LOG_EVENT:a&&a.$ReactComposerPostToGroupStore4(c);break}});a=this}a.prototype.getIsTabSelected=function(a){"use strict";return this.getComposerData(a).isTabSelected};a.prototype.getSelectedGroup=function(a){"use strict";return this.getComposerData(a).selectedGroup};a.prototype.getSelectedGroupID=function(a){"use strict";a=this.getComposerData(a).selectedGroup;return a?a.getUniqueID():null};a.prototype.getShowNux=function(a){"use strict";return this.getComposerData(a).showNux};a.prototype.$ReactComposerPostToGroupStore1=function(a,b){"use strict";a=this.validateAction(a,["composerID"]);var c=this.getComposerData(a);c.isTabSelected=b;this.emitChange(a)};a.prototype.$ReactComposerPostToGroupStore2=function(a){"use strict";a=this.validateAction(a,["composerID","group"]);var b=a[0];a=a[1];var c=this.getComposerData(b);c.selectedGroup=a;this.emitChange(b)};a.prototype.$ReactComposerPostToGroupStore3=function(a){"use strict";a=this.validateAction(a,["composerID"]);var b=this.getComposerData(a);b.showNux=!1;this.emitChange(a)};a.prototype.$ReactComposerPostToGroupStore4=function(a){"use strict";a=this.validateAction(a,["event"]);a=b("XReactComposerPostToGroupLoggingODSController").getURIBuilder().setString("event",a).getURI();new(b("AsyncRequest"))(a).send()};e.exports=new a()}),null);
__d("ReactComposerDocAttachmentSelector.react",["ix","AsyncRequest","Bootloader","React","ReactComponentWithPureRenderMixin","ReactComposerAttachmentSelectorContainer.react","ReactComposerAttachmentType","ReactComposerContextTypes","ReactComposerLoggingName","ReactComposerSproutsSelector.react","URI","asset"],(function(a,b,c,d,e,f,g){a=b("React").PropTypes;c=b("React").createClass({displayName:"ReactComposerDocAttachmentSelector",contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComponentWithPureRenderMixin")],propTypes:{isInMoreButton:a.bool,label:a.node.isRequired,createDocCampfireURI:a.string,createDocFallbackURI:a.string.isRequired,sprouts:a.bool},render:function(){return this.props.sprouts?b("React").createElement(b("ReactComposerSproutsSelector.react"),{attachmentID:b("ReactComposerAttachmentType").DOC,loggingName:b("ReactComposerLoggingName").LIVE_VIDEO_TAB_SELECTOR,icon:g("651656"),label:this.props.label,onSelected:this._onSelected}):b("React").createElement(b("ReactComposerAttachmentSelectorContainer.react"),{attachmentID:b("ReactComposerAttachmentType").DOC,label:this.props.label,icon:g("85214"),"data-testid":"create-doc-attachment-selector",onSelected:this._onSelected,loggingName:b("ReactComposerLoggingName").DOC_TAB_SELECTOR,tabIndex:this.props.isInMoreButton?"-1":void 0})},_onSelected:function(){this.props.createDocCampfireURI?b("Bootloader").loadModules(["AsyncDialog"],function(a){var c=new(b("AsyncRequest"))(this.props.createDocCampfireURI).setMethod("POST").setStatusElement(this.context.composerID);a.send(c)}.bind(this),"ReactComposerDocAttachmentSelector.react"):new(b("URI"))(this.props.createDocFallbackURI).go()}});e.exports=c}),null);
__d("ReactComposerLiveVideoAttachmentSelector.react",["fbt","ix","Bootloader","React","ReactComposerAttachmentSelectorContainer.react","ReactComposerAttachmentType","ReactComposerLoggingName","ReactComposerSproutsSelector.react","asset"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i;c=b("React").PropTypes;i=babelHelpers.inherits(a,b("React").PureComponent);i&&i.prototype;a.prototype.render=function(){"use strict";var a=function(){if(!this.props.config||!this.props.contextConfig)return;b("Bootloader").loadModules(["LiveVideoBroadcastUtils"],function(a){a.startPreviewUI(this.props.contextConfig,this.props.config)}.bind(this),"ReactComposerLiveVideoAttachmentSelector.react")}.bind(this);return this.props.sprouts?b("React").createElement(b("ReactComposerSproutsSelector.react"),{attachmentID:b("ReactComposerAttachmentType").LIVE_VIDEO,loggingName:b("ReactComposerLoggingName").LIVE_VIDEO_TAB_SELECTOR,icon:h("642152"),label:this.props.label,onAfterSelected:a}):b("React").createElement(b("ReactComposerAttachmentSelectorContainer.react"),{attachmentID:b("ReactComposerAttachmentType").LIVE_VIDEO,label:this.props.label,icon:this.props.icon,"data-testid":"live-video-attachment-selector",loggingName:b("ReactComposerLoggingName").LIVE_VIDEO_TAB_SELECTOR,onAfterSelected:a})};function a(){"use strict";i.apply(this,arguments)}a.propTypes={icon:c.any,label:c.node};a.defaultProps={icon:h("101619"),label:g._("Live Video")};e.exports=a}),null);
__d("ReactComposerMediaFilePickerController.react",["fbt","Bootloader","ComposerTargetData","CurrentUser","FileInput.react","React","ReactComposerAttachmentActions","ReactComposerAttachmentStore","ReactComposerAttachmentType","ReactComposerContextTypes","URI"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").PureComponent);h=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$3=function(a){b("ReactComposerAttachmentActions").initializeAttachment(this.context.composerID,b("ReactComposerAttachmentType").MEDIA),b("Bootloader").loadModules(["ReactComposerLoggingActions"],function(a){a.mediaUploadInputClicked(this.context.composerID,this.props.loggingName)}.bind(this),"ReactComposerMediaFilePickerController.react"),this.props.onClick&&this.props.onClick(a)}.bind(this),this.$2=function(a){__p&&__p();a.persist&&a.persist();var c=this.refs.fileInput.getFileInput();if(!this.$4(c.input.files)){b("Bootloader").loadModules(["Dialog"],function(a){var d=g._("Invalid file type"),e;c.input.files.length&&c.input.files[0].type?e=g._("{file type} is not allowed, please upload an image (JPG, PNG, GIF or TIFF) or a video type listed here:",[g._param("file type",c.input.files[0].type)]):e=g._("The file you selected is not allowed, please upload an image (JPG, PNG, GIF or TIFF) or a video type listed here:");var f;b("CurrentUser").isWorkUser()?f=new(b("URI"))().setProtocol("https").setDomain(document.location.hostname).setPath("/help/work/885144448260143").toString():f="https://www.facebook.com/help/218673814818907";var h=g._("What video file formats can I upload?");h=typeof h==="string"?h.replace(/\"/g,"&#39;"):"";h='<a href="'+f+'" title="'+h+'" target="_blank">'+f+"</a>";new a().setTitle(d).setButtons(a.OK).setBody(e.toString()+" "+h).setSemiModal(!0).show()},"ReactComposerMediaFilePickerController.react");this.props.onFilesSelected&&this.props.onFilesSelected(!1);return}b("Bootloader").loadModules(["ReactComposerPhotoUploader","ReactComposerMediaUtils","ReactComposerLoggingActions"],function(d,e,f){var g=e.handleSpecialMediaUpload(a,c,this.props.mediaConfig,this.context);this.props.onFilesSelected&&this.props.onFilesSelected(g);if(!g){d=new d(this.context,this.props.photoLimit,{disableFaceRecognition:this.props.disableFaceRecognition});!b("ReactComposerAttachmentStore").getIsAttachmentSelected(this.context.composerID,b("ReactComposerAttachmentType").MEDIA)&&!b("ReactComposerAttachmentStore").getIsAttachmentSelected(this.context.composerID,b("ReactComposerAttachmentType").TASK)&&b("ReactComposerAttachmentActions").selectAttachment(this.context.composerID,b("ReactComposerAttachmentType").MEDIA,!0,this.props.loggingName);e.uploadPhotosOrVideoFromTarget(this.context.composerID,a.target,d,this.props.targetData.targetSupportsMultiplePhotos,this.props.targetData.targetSupportsMultiMedia)}f.mediaUploadInputDone(this.context.composerID,this.props.loggingName);e.clearInput(c,!g)}.bind(this),"ReactComposerMediaFilePickerController.react")}.bind(this),c}a.prototype.render=function(){return b("React").createElement(b("FileInput.react"),{accept:this.$1(),containerClassName:this.props.containerClassName,multiple:this.props.targetData.targetSupportsMultiplePhotos,name:"composer_photo[]",display:this.props.display,onChange:this.$2,onClick:this.$3,ref:"fileInput",role:"button",tabIndex:"0","data-testid":this.props.webDriverTestID},this.props.children)};a.prototype.$1=function(){if(this.props.mediaAcceptParam)if(this.props.mediaType=="VIDEO")return this.props.mediaAcceptParam.videos;else if(this.props.mediaType=="PHOTO")return this.props.mediaAcceptParam.photos;else return this.props.mediaAcceptParam.both;return null};a.prototype.$4=function(a){if(!(this.props.mediaAcceptParam&&this.props.mediaAcceptParam.both))return!0;var b=this.props.mediaAcceptParam.both.replace(/,\s*/g,"|").replace(/\*/g,".*");b="^("+b+")$";b=new RegExp(b,"i");for(var c=0;c<a.length;++c)if(a[c].type&&!b.test(a[c].type))return!1;return!0};a.defaultProps={disableFaceRecognition:!1,display:"inline"};a.contextTypes=b("ReactComposerContextTypes");e.exports=a}),null);
__d("ReactComposerLoadableAttachmentBodyMixin",["cx","invariant","React","ReactComposerAttachmentBodyMixin","ReactComposerAttachmentInitState","ReactComposerAttachmentLoader","ReactComposerAttachmentPlaceholder.react","ReactComposerAttachmentStore","ReactComposerStore"],(function(a,b,c,d,e,f,g,h){__p&&__p();a={mixins:[b("ReactComposerAttachmentBodyMixin")(b("ReactComposerAttachmentStore"))],statics:{calculateAttachmentState:function(a,c){c=b("ReactComposerAttachmentStore").getAttachment(a,this.attachmentID);var d=b("ReactComposerAttachmentStore").getIsAttachmentSelected(a,this.attachmentID);a=b("ReactComposerStore").isActive(a);return{composerIsActive:a,initState:c&&c.initState,attachmentModule:c&&c.module,bootstrapped:c&&c.bootstrapped,postButtonModule:c&&c.postButtonModule,isSelected:d,attachmentID:this.attachmentID}}},UNSAFE_componentWillMount:function(){this.constructor.attachmentID||h(0,2069),this.props.selected&&this._shouldInitialize()&&this._initialize()},componentDidUpdate:function(a,c){this.state.initState===b("ReactComposerAttachmentInitState").INITIALIZING&&this._shouldInitialize()&&this._initialize()},renderX:function(){if(!this.state.attachmentModule||!this.state.bootstrapped){var a=this.getPlaceholderModule&&this.getPlaceholderModule();a=a?a:b("ReactComposerAttachmentPlaceholder.react");return b("React").createElement(a,babelHelpers["extends"]({className:"_3rlw"},this.props))}a=this.state.attachmentModule;return b("React").createElement(a,babelHelpers["extends"]({},this.props,{postButtonModule:this.state.postButtonModule}))},_shouldInitialize:function(){return this.constructor.initOnlyWhenComposerActive?this.state.composerIsActive:!0},_initialize:function(){b("ReactComposerAttachmentLoader").load(this.context.composerID,this.constructor.attachmentID,this.bootload,this.getBootstrapURI())}};e.exports=a}),null);
__d("ReactComposerLoggingActions",["ExtensibleSproutsItemType","ReactComposerActionTypes","ReactComposerDispatcher","ReactComposerFeatureType","ReactComposerLoggingName","ReactComposerMediaUploadActionType"],(function(a,b,c,d,e,f){__p&&__p();a={composerEntry:function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerActionTypes").COMPOSER_ENTRY,uiElementName:c})},mediaUploadInputClicked:function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerMediaUploadActionType").MEDIA_UPLOAD_INPUT_CLICKED,sourceLoggingName:c})},mediaUploadInputDone:function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerMediaUploadActionType").MEDIA_UPLOAD_INPUT_DONE,sourceLoggingName:c})},mediaFileDropped:function(a){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerActionTypes").FEATURE_INTENT,featureType:b("ExtensibleSproutsItemType").MEDIA,uiElementName:b("ReactComposerLoggingName").MEDIA_FILE_DROPPED})},mediaFileDropFinished:function(a){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerActionTypes").FEATURE_DONE,featureType:b("ExtensibleSproutsItemType").MEDIA,uiElementName:b("ReactComposerLoggingName").MEDIA_FILE_DROPPED})},mediaFilePasted:function(a){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerActionTypes").FEATURE_INTENT,featureType:b("ExtensibleSproutsItemType").MEDIA,uiElementName:b("ReactComposerLoggingName").MEDIA_FILE_PASTED})},mediaFilePasteFinished:function(a){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerActionTypes").FEATURE_DONE,featureType:b("ExtensibleSproutsItemType").MEDIA,uiElementName:b("ReactComposerLoggingName").MEDIA_FILE_PASTED})},sproutVisibilityUpdated:function(a,c,d,e,f,g){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerActionTypes").SPROUT_VIEW_UPDATE,visibilityMap:c,event:d,sproutsState:e,promotedSprout:f,promotionID:g})},collectionSelectorCancel:function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerActionTypes").FEATURE_CANCEL,featureType:b("ReactComposerFeatureType").COLLECTIONS,uiElementName:c})},collectionSelectorDone:function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerActionTypes").FEATURE_DONE,featureType:b("ReactComposerFeatureType").COLLECTIONS,uiElementName:c})},composerCancel:function(a){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerActionTypes").COMPOSER_CANCEL})},composerNavigateAwayAttempt:function(a){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerActionTypes").COMPOSER_NAVIGATE_AWAY_ATTEMPT})},composerSharesheetPostClicked:function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,sourceLoggingName:c,type:b("ReactComposerActionTypes").COMPOSER_SHARESHEET_POST_CLICKED})}};e.exports=a}),null);
__d("CollectionThumbnail.react",["cssVar","cx","fbt","BackgroundImage.react","Focus","React","isKeyActivation","joinClasses"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").PureComponent);j=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=j.constructor).call.apply(a,[this].concat(e)),this.$2=function(a){b("isKeyActivation")(a)&&(this.props.onClick&&this.props.onClick(a))}.bind(this),c}a.prototype.focus=function(){b("Focus").set(this.$1,!0)};a.prototype.render=function(){return b("React").createElement("div",{className:b("joinClasses")(this.props.className,"_2vw6"),onClick:this.props.onClick,onKeyDown:this.$2,tabIndex:0,ref:function(a){return this.$1=a}.bind(this),role:"button"},b("React").createElement(b("BackgroundImage.react"),{backgroundSize:"cover",height:parseInt("140px",10),src:this.props.thumbnailURL,width:parseInt("140px",10)}),b("React").createElement("div",{className:"_3iom"},b("React").createElement("div",{className:"_3ion"},b("React").createElement(b("BackgroundImage.react"),{backgroundPosition:"100% 50%",className:"_1x7m",height:12,src:this.props.privacyIcon,width:12}),this.props.collectionName),b("React").createElement("div",{className:"_3ioo"},i._({"*":"{number of posts} posts","_1":"1 post"},[i._plural(this.props.numPosts,"number of posts")]))))};a.propTypes={collectionID:c.oneOfType([c.string,c.number]).isRequired,collectionName:c.string.isRequired,className:c.string,numPosts:c.number.isRequired,onClick:c.func,thumbnailURL:c.string.isRequired,privacyIcon:c.string};e.exports=a}),null);
__d("ReactComposerCollectionsActions",["ReactComposerCollectionsActionTypes","ReactComposerDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={showCollectionsSelector:function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,sourceLoggingName:c,type:b("ReactComposerCollectionsActionTypes").SHOW_COLLECTION_SELECTOR})},hideCollectionsSelector:function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,sourceLoggingName:c,type:b("ReactComposerCollectionsActionTypes").HIDE_COLLECTION_SELECTOR})},hideCollectionsSelectorWithoutLogging:function(a){b("ReactComposerDispatcher").dispatch({composerID:a,suppressWaterfallLogging:!0,type:b("ReactComposerCollectionsActionTypes").HIDE_COLLECTION_SELECTOR})},showCreationLayer:function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,sourceLoggingName:c,type:b("ReactComposerCollectionsActionTypes").SHOW_CREATION_LAYER})},hideCreationLayer:function(a,c,d){d===void 0&&(d=!1),b("ReactComposerDispatcher").dispatch({composerID:a,isCancel:d,sourceLoggingName:c,type:b("ReactComposerCollectionsActionTypes").HIDE_CREATION_LAYER})},showSharingSpaceCreationLayer:function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,sourceLoggingName:c,type:b("ReactComposerCollectionsActionTypes").SHOW_SHARING_SPACE_CREATION_LAYER})},hideSharingSpaceCreationLayer:function(a,c,d){d===void 0&&(d=!1),b("ReactComposerDispatcher").dispatch({composerID:a,isCancel:d,sourceLoggingName:c,type:b("ReactComposerCollectionsActionTypes").HIDE_SHARING_SPACE_CREATION_LAYER})},spacesLoaded:function(a,c,d){b("ReactComposerDispatcher").dispatch({composerID:a,sourceLoggingName:c,type:b("ReactComposerCollectionsActionTypes").SPACE_SELECTOR_LOADED,spaceCount:d})}};e.exports=a}),null);
__d("XReactComposerCollectionSelectorController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/react_composer/collections/selector/",{spaces_aware:{type:"Bool",defaultValue:!1}})}),null);
__d("ReactComposerCollectionsStore",["AsyncRequest","LoadObject","ReactComposerActionStore","ReactComposerCollectionsActionTypes","XReactComposerCollectionSelectorController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("ReactComposerActionStore"));g=c&&c.prototype;function a(){__p&&__p();var a;g.constructor.call(this,function(){return{collectionsLoadObject:null,isSelectorVisible:!1}},function(c){switch(c.type){case b("ReactComposerCollectionsActionTypes").SHOW_COLLECTION_SELECTOR:a&&a.$ReactComposerCollectionsStore1(c);break;case b("ReactComposerCollectionsActionTypes").HIDE_COLLECTION_SELECTOR:a&&a.$ReactComposerCollectionsStore2(c);break;case b("ReactComposerCollectionsActionTypes").SHOW_CREATION_LAYER:a&&a.$ReactComposerCollectionsStore3(c);break;case b("ReactComposerCollectionsActionTypes").HIDE_CREATION_LAYER:a&&a.$ReactComposerCollectionsStore4(c);break}});a=this}a.prototype.loadCollections=function(a){var c=this.getComposerData(a);c.collectionsLoadObject=b("LoadObject").loading();c=b("XReactComposerCollectionSelectorController").getURIBuilder().setBool("spaces_aware",!0).getURI();new(b("AsyncRequest"))().setURI(c).setMethod("GET").setReadOnly(!0).setHandler(function(c){var b=this.getComposerData(a);c={albums:c.payload.albums};b.collectionsLoadObject=b.collectionsLoadObject.setValue(c).done();this.emitChange(a)}.bind(this)).send()};a.prototype.addNewAlbum=function(a,b){this.$ReactComposerCollectionsStore5(a,b)};a.prototype.$ReactComposerCollectionsStore5=function(a,b){__p&&__p();var c=this.getCollections(a);if(!c||!c.isDone())return;c=c.getValue();if(c==null)return;c=c.albums;c||(c=[]);c.unshift(b);this.emitChange(a)};a.prototype.getCollections=function(a){a=this.getComposerData(a);return a.collectionsLoadObject};a.prototype.getCollectionByID=function(a,b){a=this.getComposerData(a);a=a.collectionsLoadObject;if(!a||!a.isDone())return null;a=a.getValue();return a.albums&&a.albums.find(function(a){return a.id===b})};a.prototype.isSelectorVisible=function(a){a=this.getComposerData(a);return a.isSelectorVisible};a.prototype.$ReactComposerCollectionsStore1=function(a){a=this.validateAction(a,"composerID");var b=this.getComposerData(a);b.collectionsLoadObject||this.loadCollections(a);b.isSelectorVisible=!0;this.emitChange(a)};a.prototype.$ReactComposerCollectionsStore2=function(a){a=this.validateAction(a,"composerID");var b=this.getComposerData(a);b.isSelectorVisible=!1;this.emitChange(a)};a.prototype.isCreationLayerVisible=function(a){a=this.getComposerData(a);return a.isCreationLayerVisible};a.prototype.$ReactComposerCollectionsStore3=function(a){a=this.validateAction(a,"composerID");var b=this.getComposerData(a);b.isCreationLayerVisible=!0;this.emitChange(a)};a.prototype.$ReactComposerCollectionsStore4=function(a){a=this.validateAction(a,"composerID");var b=this.getComposerData(a);b.isCreationLayerVisible=!1;this.emitChange(a)};e.exports=new a()}),null);
__d("ReactComposerCollectionSelector.react",["ix","cx","fbt","AccessibleLayer","CollectionThumbnail.react","ContextualLayer.react","ContextualLayerAutoFlip","Grid.react","ReactComposerAudienceActions","ReactComposerCollectionsActions","ReactComposerCollectionsStore","ReactComposerLoggingActions","ReactComposerLoggingName","InlineBlock.react","Image.react","LayerAutoFocus","LayerHideOnEscape","LayerFadeOnHide","LayerFadeOnShow","LayerHideOnBlur","LayerTabIsolation","Link.react","ShimButton.react","XUIAmbientNUX.react","XUIButton.react","XUICard.react","XUICardHeader.react","XUICardHeaderTitle.react","XUICardSection.react","XUIPopoverButton.react","XUISpinner.react","ReactComposerContextTypes","React","ReactDOM","fbglyph","focusWithinLayer","ifRequired","isKeyActivation"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("Grid.react").GridItem;c=babelHelpers.inherits(a,b("React").PureComponent);j=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=j.constructor).call.apply(a,[this].concat(e)),this.$1=null,this.$3=function(){this.props.selectorVisible||b("ReactComposerCollectionsActions").showCollectionsSelector(this.context.composerID,b("ReactComposerLoggingName").COLLECTIONS_SELECTOR_BUTTON)}.bind(this),this.$4=function(a){b("isKeyActivation")(a)&&this.$5(a.nativeEvent)}.bind(this),this.$5=function(a){b("ReactComposerAudienceActions").setCollectionID(this.context.composerID,b("ReactComposerLoggingName").COLLECTION_CLEAR_BUTTON,null),a.stopPropagation()}.bind(this),this.$6=function(a,c){c===void 0&&(c=b("ReactComposerLoggingName").OTHERS),!a&&this.props.selectorVisible&&b("ReactComposerCollectionsActions").hideCollectionsSelector(this.context.composerID,c)}.bind(this),this.$7=function(){b("ReactComposerCollectionsActions").hideCollectionsSelectorWithoutLogging(this.context.composerID),b("ReactComposerCollectionsActions").showCreationLayer(this.context.composerID,b("ReactComposerLoggingName").COLLECTIONS_SELECTOR_CREATE_BUTTON)}.bind(this),c}a.prototype.componentDidUpdate=function(a,c){__p&&__p();if(this.props.selectorVisible&&!a.selectorVisible&&this.props.selectedCollectionID){c=b("ReactDOM").findDOMNode(this.refs[this.props.selectedCollectionID]);if(c!==null&&this.$1!==null){var d=b("ReactDOM").findDOMNode(this.$1);d!==null&&(d.scrollTop=c.offsetTop)}}if(a.collections&&a.collections.isLoading()&&this.props.collections&&!this.props.collections.isLoading()){d=b("ReactDOM").findDOMNode(this.$2);d&&b("focusWithinLayer")(d,!0)}};a.prototype.$8=function(){b("ReactComposerCollectionsActions").hideCreationLayer(this.context.composerID,b("ReactComposerLoggingName").COLLECTIONS_CREATE_CANCEL_BUTTON,!0),b("ReactComposerLoggingActions").collectionSelectorCancel(this.context.composerID,b("ReactComposerLoggingName").COLLECTIONS_CREATE_CANCEL_BUTTON)};a.prototype.$9=function(a){b("ReactComposerCollectionsStore").addNewAlbum(this.context.composerID,a),b("ReactComposerCollectionsActions").hideCreationLayer(this.context.composerID,b("ReactComposerLoggingName").COLLECTIONS_CREATE_SUBMIT_BUTTON),b("ReactComposerLoggingActions").collectionSelectorDone(this.context.composerID,b("ReactComposerLoggingName").COLLECTIONS_CREATE_SUBMIT_BUTTON),this.$10(a)};a.prototype.$10=function(a){a.id==this.props.selectedCollectionID?b("ReactComposerAudienceActions").setCollectionID(this.context.composerID,b("ReactComposerLoggingName").COLLECTION_SELECTED,null):b("ReactComposerAudienceActions").setCollectionID(this.context.composerID,b("ReactComposerLoggingName").COLLECTION_SELECTED,a.id,a.privacyLabel),this.$6(!1,b("ReactComposerLoggingName").COLLECTION_SELECTED),b("ifRequired")("ReactComposerPostToGroupActions",function(a){return a.unselectTab(this.context.composerID)}.bind(this))};a.prototype.$11=function(a){if(a==null)return null;a=b("ReactComposerCollectionsStore").getCollectionByID(this.context.composerID,a);return a?a.name:null};a.prototype.$12=function(a){if(a){a=this.$11(a);if(a)return a}return i._("+ Album").toString()};a.prototype.$13=function(){return b("React").createElement(b("ShimButton.react"),{className:(this.props.selectedCollectionID?"":"autofocus")+" _2vw6 _1xp0",key:"addAlbumButton",onClick:this.$7},b("React").createElement("div",{className:"_1xp2"},b("React").createElement("div",{className:"_1xp3"}),i._("Create Album")))};a.prototype.$14=function(){return b("React").createElement("div",{key:"albumsNullState",className:"_1d5t"},b("React").createElement("span",{className:"_1d5u"}),b("React").createElement("div",{className:"_1d5v"},i._("No albums to show")),b("React").createElement(b("XUIButton.react"),{label:i._("Create Album"),use:"confirm",onClick:this.$7}))};a.prototype.$15=function(){var a=this.props.collections&&this.props.collections.getValue(),b=this.$13();return!a||!a.albums||a.albums.length===0?this.$14():this.$16("albumsGrid",b,a.albums)};a.prototype.$16=function(a,c,d){c=[c];d&&c.push(d.map(function(a){return b("React").createElement(k,{ref:a.id,key:a.id,className:a.id===this.props.selectedCollectionID?"_5zfq":""},b("React").createElement(b("CollectionThumbnail.react"),{className:a.id===this.props.selectedCollectionID?"autofocus":"",collectionID:a.id,collectionName:a.name,numPosts:a.numPosts,onClick:function(){return this.$10(a)}.bind(this),thumbnailURL:a.thumbnailURL,privacyIcon:a.privacyIcon}))}.bind(this)));return b("React").createElement(b("Grid.react"),{key:a,className:"_1d5w",cols:2,fixed:!1},c)};a.prototype.$17=function(){if(!this.props.collections)return null;else return b("React").createElement(b("ContextualLayer.react"),{behaviors:{AccessibleLayer:b("AccessibleLayer"),ContextualLayerAutoFlip:b("ContextualLayerAutoFlip"),LayerAutoFocus:b("LayerAutoFocus"),LayerHideOnBlur:b("LayerHideOnBlur"),LayerHideOnEscape:b("LayerHideOnEscape"),LayerFadeOnShow:b("LayerFadeOnShow"),LayerFadeOnHide:b("LayerFadeOnHide"),LayerTabIsolation:b("LayerTabIsolation")},contextRef:function(){return this.refs.collectionSelectorTrigger}.bind(this),onToggle:this.$6,position:"below",shown:this.props.selectorVisible},b("React").createElement(b("XUICard.react"),{className:"_5ze9"},b("React").createElement(b("XUICardHeader.react"),{className:"_5zea",type:"primary"},b("React").createElement(b("XUICardHeaderTitle.react"),null,i._("Albums"))),b("React").createElement(b("XUICardSection.react"),{ref:function(a){return this.$1=a}.bind(this),className:"_5zeh"},!this.props.collections||this.props.collections.isLoading()?b("React").createElement("div",{className:"_2n10"},b("React").createElement(b("XUISpinner.react"),{size:"large"})):b("React").createElement("div",{ref:function(a){return this.$2=a}.bind(this)},this.$15()))))};a.prototype.$18=function(){return null};a.prototype.$19=function(){return b("React").createElement(b("XUIAmbientNUX.react"),{contextRef:function(){return this.refs.collectionSelectorTrigger}.bind(this),shown:this.props.showAnyPostTypeNux,onCloseButtonClick:this.props.onAnyPostTypeNuxClose,position:this.props.alternateTriggerComponent?"below":"above"},i._("Now you can add posts, check-ins and more to albums"))};a.prototype.render=function(){var a=!!this.$11(this.props.selectedCollectionID);return b("React").createElement(b("InlineBlock.react"),{className:"uiContextualLayerParent"},this.props.alternateTriggerComponent?b("React").createElement(b("Link.react"),{role:"button",onClick:this.$3,ref:"collectionSelectorTrigger"},this.props.alternateTriggerComponent):b("React").createElement(b("XUIPopoverButton.react"),{className:"_5ze8",label:this.$12(this.props.selectedCollectionID),onClick:this.$3,ref:"collectionSelectorTrigger",use:"confirm",chevron:a?b("React").createElement(b("Image.react"),{onClick:this.$5,onKeyDown:this.$4,role:"button",src:g("114707"),tabIndex:0}):null}),this.$17(),this.$18(),this.props.onAnyPostTypeNuxVisible&&this.$19())};a.defaultProps={collections:null,creationLayerVisible:!1,selectedCollectionID:null,selectorVisible:!1,showAnyPostTypeNux:!1,onAnyPostTypeNuxVisible:!1};a.contextTypes=b("ReactComposerContextTypes");e.exports=a}),null);
__d("ReactComposerCollectionSelectorContainer.react",["React","ReactComponentWithPureRenderMixin","ReactComposerAudienceStore","ReactComposerCollectionSelector.react","ReactComposerCollectionsStore","ReactComposerContextTypes","ReactComposerPropsAndStoreBasedStateMixin","ReactComposerSproutsDisplayState","ReactComposerStore","SimpleNUXMessage","SimpleNUXMessageTypes"],(function(a,b,c,d,e,f){"use strict";a=b("React").PropTypes;c=b("React").createClass({displayName:"ReactComposerCollectionSelectorContainer",contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComponentWithPureRenderMixin"),b("ReactComposerPropsAndStoreBasedStateMixin")(b("ReactComposerAudienceStore"),b("ReactComposerCollectionsStore"))],propTypes:{alternateTriggerComponent:a.element,addAnyPostToAlbum:a.bool},statics:{calculateState:function(a,c,d){return{collections:b("ReactComposerCollectionsStore").getCollections(a),selectedCollectionID:b("ReactComposerAudienceStore").getCollectionID(a),isSelectorVisible:b("ReactComposerCollectionsStore").isSelectorVisible(a),isCreationLayerVisible:b("ReactComposerCollectionsStore").isCreationLayerVisible(a),showAnyPostTypeNux:c.addAnyPostToAlbum&&!b("SimpleNUXMessage").hasUserSeenMessage(b("SimpleNUXMessageTypes").ALBUMSV2_ANY_POST_TYPE_WWW),sproutsDisplayState:b("ReactComposerStore").getSproutsDisplayState(d.composerID)}}},_onAnyPostTypeNuxClose:function(){b("SimpleNUXMessage").markMessageSeenByUser(b("SimpleNUXMessageTypes").ALBUMSV2_ANY_POST_TYPE_WWW),this.setState({showAnyPostTypeNux:!1})},render:function(){return b("React").createElement(b("ReactComposerCollectionSelector.react"),{alternateTriggerComponent:this.props.alternateTriggerComponent,collections:this.state.collections,creationLayerVisible:this.state.isCreationLayerVisible,selectedCollectionID:this.state.selectedCollectionID,selectorVisible:this.state.isSelectorVisible,showAnyPostTypeNux:this.state.showAnyPostTypeNux,onAnyPostTypeNuxClose:this._onAnyPostTypeNuxClose,onAnyPostTypeNuxVisible:this.state.sproutsDisplayState===b("ReactComposerSproutsDisplayState").EXPANDED})}});e.exports=c}),null);
__d("ReactComposerWithSprouts.react",["cx","Arbiter","FluxContainer","React","ReactComposer.react","ReactComposerActions","ReactComposerAttachmentActions","ReactComposerAttachmentStore","ReactComposerAudienceStore","ReactComposerContextTypes","ReactComposerEvents","ReactComposerFocusStore","ReactComposerLoggingName","ReactComposerSproutsDisplayState","ReactComposerStore","ReactComposerTaggerActions","ReactComposerTaggerStore","ReactComposerTaggerType","SubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;a=babelHelpers.inherits(i,b("React").PureComponent);h=a&&a.prototype;function i(a,b){h.constructor.call(this,a,b),this.beforeCalculateInitialState(this.context.composerID,this.props),this.state=i.calculateState(this.state,this.props,this.context)}i.getStores=function(){return[b("ReactComposerStore"),b("ReactComposerFocusStore"),b("ReactComposerAudienceStore")]};i.prototype.beforeCalculateInitialState=function(a,c){c.expandOnInit&&(this.context.gks&&this.context.gks.lazySproutsExpand||b("ReactComposerActions").expandSprouts(this.context.composerID),b("ReactComposerAttachmentActions").initializeAttachment(a,c.defaultAttachmentOnExpand,!0,b("ReactComposerLoggingName").OTHERS))};i.calculateState=function(a,c,d){a=d.composerID;return{displayState:b("ReactComposerStore").getSproutsDisplayState(a),isFocused:b("ReactComposerFocusStore").isComposerFocused(a),messengerSectionVisible:b("ReactComposerAudienceStore").getMessengerSectionVisible(d.composerID)}};i.prototype.UNSAFE_componentWillMount=function(){this.$1=new(b("SubscriptionsHandler"))(),this.$1.addSubscriptions(b("Arbiter").subscribeOnce("ReactFeedComposerXBootloader/selectcomposer/"+this.context.composerID,function(a,c){return this.$2(b("ReactComposerLoggingName").PROMPT,c&&c.selectedTagger)}.bind(this)))};i.prototype.render=function(){return b("React").createElement("div",{className:"_1cx1"+(this.state.displayState===b("ReactComposerSproutsDisplayState").EXPANDED?" _4qr4":"")+(this.state.displayState===b("ReactComposerSproutsDisplayState").INLINE?" _4a8c":"")+" _4aay _4ab3"+(this.context.gks&&!this.context.gks.addAnyPostToAlbum?" _2qma":"")+(this.state.messengerSectionVisible?" _1qf9":""),onClick:function(a){this.$2(b("ReactComposerLoggingName").INLINE_COMPOSER),this.props.onClick&&this.props.onClick(a)}.bind(this),role:"presentation"},b("React").createElement(b("ReactComposer.react"),this.props.innerProps,this.props.children))};i.prototype.$2=function(a,c){if(!this.state.isFocused){this.context.gks&&this.context.gks.lazySproutsExpand||b("ReactComposerActions").expandSprouts(this.context.composerID);b("ReactComposerAttachmentActions").initializeAttachment(this.context.composerID,this.props.defaultAttachmentOnExpand,!0,a);var d=b("ReactComposerAttachmentStore").getSelectedAttachmentID(this.context.composerID);b("ReactComposerAttachmentActions").selectAttachment(this.context.composerID,d||this.props.defaultAttachmentOnExpand,!0,a);c&&b("ReactComposerTaggerActions").selectTagger(this.context.composerID,c.loggingName,c.taggerType);(!b("ReactComposerTaggerStore").getSelectedTagger(this.context.composerID)||b("ReactComposerTaggerStore").getSelectedTagger(this.context.composerID)===b("ReactComposerTaggerType").FORMATTED_TEXT)&&setTimeout(function(){return b("Arbiter").inform(b("ReactComposerEvents").ACTIVATE_ATTACHMENT+this.context.composerID)}.bind(this),0)}};i.defaultProps={expandOnInit:!1};i.contextTypes=b("ReactComposerContextTypes");e.exports=b("FluxContainer").create(i,{withContext:!0,withProps:!0})}),null);
__d("XSproutPromotionUpdateController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/react_composer/sprouts/promotions/update/",{promotion_id:{type:"Int"},increment_view:{type:"Exists",defaultValue:!1},end_promotion:{type:"Exists",defaultValue:!1},current_promotion:{type:"Exists",defaultValue:!1}})}),null);
__d("ReactComposerSproutBadgePromotionUtils",["AsyncRequest","ReactComposerActions","XSproutPromotionUpdateController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={initWWWPromotion:function(a){a=b("XSproutPromotionUpdateController").getURIBuilder().setInt("promotion_id",a).setExists("current_promotion",!0).getURI();new(b("AsyncRequest"))().setURI(a).send()},addView:function(a,c){a=b("XSproutPromotionUpdateController").getURIBuilder().setInt("promotion_id",a).setExists("increment_view",!0).getURI();new(b("AsyncRequest"))().setURI(a).setHandler(function(a){a.payload&&a.payload.clear_badge_on_next_composer&&b("ReactComposerActions").setQueueFinishedSproutPromotion(c)}).send();b("ReactComposerActions").setLoggedSproutPromotionView(c)},endPromotion:function(a,c){a=b("XSproutPromotionUpdateController").getURIBuilder().setInt("promotion_id",a).setExists("end_promotion",!0).getURI();new(b("AsyncRequest"))().setURI(a).send();b("ReactComposerActions").setFinishedSproutPromotion(c)}};e.exports=a}),null);
__d("ReactComposerCollageLayoutActor",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({USER:1,PAGE:2})}),null);
__d("ReactComposerMediaAspectTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({LANDSCAPE:"landscape",PORTRAIT:"portrait",SQUARE:"square",PANORAMA_TESTING_ONLY:"panorama",VERTICAL_PANORAMA_TESTING_ONLY:"vertical_panorama"})}),null);
__d("ReactComposerMediaAspect",["ReactComposerMediaAspectTypes"],(function(a,b,c,d,e,f){"use strict";e.exports={fromRect:function(a){return this._fromWidthAndHeight(a.w(),a.h())},fromDimensions:function(a){return this._fromWidthAndHeight(a[0],a[1])},_fromWidthAndHeight:function(a,c){if(a>c)return b("ReactComposerMediaAspectTypes").LANDSCAPE;else if(a<c)return b("ReactComposerMediaAspectTypes").PORTRAIT;else return b("ReactComposerMediaAspectTypes").SQUARE}}}),null);
__d("ReactComposerCollageLayoutModel",["regeneratorRuntime","ReactComposerCollageLayoutActor","ReactComposerMediaAspect"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("regeneratorRuntime").mark(i),h=b("regeneratorRuntime").mark(j);function i(a,c){__p&&__p();var d,e;return b("regeneratorRuntime").wrap(function(b){__p&&__p();while(1)switch(b.prev=b.next){case 0:d=a.next();e=c.next();if(!(d.done||e.done)){b.next=5;break}return b.abrupt("break",9);case 5:b.next=7;return[d.value,e.value];case 7:b.next=0;break;case 9:case"end":return b.stop()}},g,this)}function j(a){__p&&__p();var c,d,e,f,g;return b("regeneratorRuntime").wrap(function(b){__p&&__p();while(1)switch(b.prev=b.next){case 0:c=a,d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();case 1:if(!d){b.next=7;break}if(!(e>=c.length)){b.next=4;break}return b.abrupt("break",16);case 4:f=c[e++];b.next=11;break;case 7:e=c.next();if(!e.done){b.next=10;break}return b.abrupt("break",16);case 10:f=e.value;case 11:g=f;b.next=14;return g;case 14:b.next=1;break;case 16:case"end":return b.stop()}},h,this)}function a(a,c){this.$1=!!(a&b("ReactComposerCollageLayoutActor").USER),this.$2=!!(a&b("ReactComposerCollageLayoutActor").PAGE),this.$3=[],c&&this.addPhotoLayouts(c)}a.prototype.addPhotoLayout=function(a){this.$3.push(a);return this};a.prototype.addPhotoLayouts=function(a){a.forEach(function(a){return this.$3.push(a)}.bind(this));return this};a.prototype.getNumPhotoLayouts=function(){return this.$3.length};a.prototype.getPhotoLayouts=function(){return this.$3};a.prototype.getIsValidForPages=function(){return this.$2};a.prototype.getIsValidForUsers=function(){return this.$1};a.prototype.getIsValidFor=function(a){switch(a){case b("ReactComposerCollageLayoutActor").USER:return this.getIsValidForUsers();case b("ReactComposerCollageLayoutActor").PAGE:return this.getIsValidForPages()}return!1};a.prototype.hasMatchingCollagePhotoLayoutType=function(a){var c=b("ReactComposerMediaAspect").fromRect(this.$3[0]);a=b("ReactComposerMediaAspect").fromDimensions(a);return c===a};a.prototype.score=function(a){__p&&__p();var b=0;for(var a=i(j(this.getPhotoLayouts()),a.values()),c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;var f=e[0];e=e[1];if(!e)continue;var g=f.w();f=f.h();var h=e[0];e=e[1];var k=0;if(h===0||e===0)k=0;else if(g*e/h>=f){var l=g*e/h;k=(l-f)/l}else if(f*h/e>g){l=f*h/e;k=(l-g)/l}b-=k*100;e===h?b-=k*5:g>f?h>e?b+=k*25:b-=k*25:g<f?h<e?b+=k*25:b-=k*25:g===f&&(b-=k*5)}b+=200*this.getNumPhotoLayouts();return b};e.exports=a}),null);
__d("ReactComposerCollageLayoutData",["ReactComposerCollageLayoutModel","ReactComposerJSONCollageLayoutData","Rect"],(function(a,b,c,d,e,f){"use strict";var g=[];Object.keys(b("ReactComposerJSONCollageLayoutData")).forEach(function(a){b("ReactComposerJSONCollageLayoutData")[a].forEach(function(a){g.push(new(b("ReactComposerCollageLayoutModel"))(a.validActors,a.photoLayouts.map(function(a){return new(Function.prototype.bind.apply(b("Rect"),[null].concat(a)))()})))})});e.exports=g}),null);
__d("ReactComposerCollageLayoutSelection",["FBIDCheck","ReactComposerCollageLayoutActor","ReactComposerCollageLayoutData"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports={MAX_NUM_COLS:6,MAX_NUM_ROWS:6,_getCollageLayoutsFor:function(a){return b("ReactComposerCollageLayoutData").filter(function(b){return b.getIsValidFor(a)})},getMaxPhotosSupported:function(){return Math.max.apply(Math,b("ReactComposerCollageLayoutData").map(function(a){return a.getNumPhotoLayouts()}))},getMaxPhotosSupportedFor:function(a){return Math.max.apply(Math,this._getCollageLayoutsFor(a).map(function(a){return a.getNumPhotoLayouts()}))},getCollageLayout:function(a,c){if(!c)return this.getBestUserCollageLayout(a);c=b("FBIDCheck").isUser_deprecated(c)?this.getBestUserCollageLayout(a):this.getBestPageCollageLayout(a);return c},getBestPageCollageLayout:function(a){__p&&__p();if(a.size==0)return new Map();var c=a.values().next().value,d=Math.min(this.getMaxPhotosSupportedFor(b("ReactComposerCollageLayoutActor").PAGE),a.size),e=this._getCollageLayoutsFor(b("ReactComposerCollageLayoutActor").PAGE).filter(function(a){return a.getNumPhotoLayouts()===d});if(!e.length)throw new Error("no valid layout for these media");e=e.filter(function(a){return a.hasMatchingCollagePhotoLayoutType(c)});if(!e.length)throw new Error("no valid layout for these media starts with a suitable aspect");e=e[0];var f=new Map(),g=0;e=e.getPhotoLayouts();for(var a=a.keys(),h=Array.isArray(a),i=0,a=h?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(h){if(i>=a.length)break;j=a[i++]}else{i=a.next();if(i.done)break;j=i.value}j=j;var k=e[g++];k&&f.set(j,k)}return f},getBestUserCollageLayout:function(a){__p&&__p();var c=this._getCollageLayoutsFor(b("ReactComposerCollageLayoutActor").USER).filter(function(b){return b.getNumPhotoLayouts()<=a.size});if(!c.length)throw new Error("no valid layout for these media");c=this._bestLayoutByScore(c,a);if(!c)throw new Error("no best layout? Should not happen!");var d=new Map(),e=0;c=c.getPhotoLayouts();for(var f=a.keys(),g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{h=f.next();if(h.done)break;i=h.value}i=i;var j=c[e++];j&&d.set(i,j)}return d},_bestLayoutByScore:function(a,b){__p&&__p();a=a.map(function(a){return[a,a.score(b)]});a=a.reduce(function(a,b){var c=a[0];a=a[1];var d=b[0];b=b[1];return a===null||b>a?[d,b]:[c,a]},[null,null]);a=a[0];return a}}}),null);
__d("dataUriToBlob",[],(function(a,b,c,d,e,f){__p&&__p();function a(a){__p&&__p();var b=a.split(",")[0].indexOf("base64")>=0,c=a.split(",")[0].split(":")[1].split(";")[0];a=b?atob(a.split(",")[1]):decodeURIComponent(a.split(",")[1]);if(b){b=new Uint8Array(a.length);for(var d=0;d<a.length;d++)b[d]=a.charCodeAt(d);d=[b]}else d=[a];return new Blob(d,{type:c})}e.exports=a}),null);
__d("CollageLayoutConfig",[],(function(a,b,c,d,e,f){__p&&__p();var g=4;function a(a,b,c,d){c===void 0&&(c=g),this.$2=c,this.$3=b,this.$5=d,this.$6(a)}a.prototype.getItemStyleInfos=function(){"use strict";return this.$1};a.prototype.getIndexForPoint=function(a,b){"use strict";var c=this.$1.findIndex(function(c){return c.left<=a&&c.top<=b&&c.left+c.width>=a&&c.top+c.height>=b});return c===-1?null:c};a.prototype.getCalculatedHeight=function(){"use strict";return this.$4};a.prototype.getSpacing=function(){"use strict";return this.$2};a.prototype.getWidth=function(){"use strict";return this.$3};a.prototype.$6=function(a){"use strict";__p&&__p();var b=this.$7(a),c=this.$8(a),d=this.$2*(c-1),e=Math.ceil((this.$3-d)/c);this.$4=this.$5||(e+this.$2)*b-this.$2;d=this.$2*(b-1);var f=Math.ceil((this.$4-d)/b);this.$1=[];a.forEach(function(a){a={left:(e+this.$2)*a.x,top:(f+this.$2)*a.y,width:(e+this.$2)*a.width-this.$2,height:(f+this.$2)*a.height-this.$2};a.left+a.width>this.$3&&(a.width=this.$3-a.left);this.$1.push(a)}.bind(this))};a.prototype.$8=function(a){"use strict";var b=0;a.forEach(function(a){b=Math.max(b,a.x+a.width)});return b};a.prototype.$7=function(a){"use strict";var b=0;a.forEach(function(a){b=Math.max(b,a.y+a.height)});return b};e.exports=a}),null);
__d("MediaManagerTab",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SOUND_COLLECTION:"sound_collection",DASHBOARD:"dashboard",PAGES:"pages",INSIGHTS:"insights",INSIGHTS_PERFORMANCE:"insights_performance",INSIGHTS_EARNINGS:"insights_earnings",INSIGHTS_FUNNEL:"insights_funnel",INSIGHTS_LOYALTY:"insights_loyalty",INSIGHTS_AUDIENCE:"insights_audience",INSIGHTS_SURFACES:"insights_surfaces",CONTENT:"content",CONTENT_POSTS:"content_posts",CONTENT_MEDIA:"content_media",CONTENT_PLAYLISTS:"content_playlists",INBOX:"inbox",MONETIZATION:"monetization",MONETIZATION_AD_BREAKS:"monetization_ad_breaks",MONETIZATION_FAN_SUBSCRIPTIONS:"monetization_fan_subscriptions",MONETIZATION_PAYOUT_SETTINGS:"monetization_payout_settings",MONETIZATION_PLAYBOOK:"monetization_playbook",MONETIZATION_ELIGIBILITY:"monetization_eligibility",MONETIZATION_REFERRAL:"monetization_referral",HOME:"home",RIGHTS_MANAGER:"rights_manager",RIGHTS_MANAGER_DISPUTES:"rights_manager_disputes",RIGHTS_MANAGER_PUBLISHER_DISPUTES:"rights_manager_publisher_disputes",RIGHTS_MANAGER_MATCHING_VIDEOS:"rights_manager_matching_videos",RIGHTS_MANAGER_REFERENCE_LIBRARY:"rights_manager_reference_library",RIGHTS_MANAGER_SETTINGS:"rights_manager_settings",RIGHTS_MANAGER_COMPOSITIONS:"rights_manager_compositions",RIGHTS_MANAGER_PUBLISHER_MATCHING_VIDEOS:"rights_manager_publisher_matching_videos",RIGHTS_MANAGER_SOUND_RECORDINGS:"rights_manager_sound_recordings",SETTINGS:"settings",SETTINGS_ACCOUNTS:"settings_accounts",SETTINGS_ROLES:"settings_roles",SAMPLE:"sample",CODEGEN_EXPERIMENT:"codegen_experiment",CREATIVE_TOOLS:"creative_tools",GAME_SHOWS:"game_shows",CT_SOUND_COLLECTION:"ct_sound_collection",INSTAGRAM_CONTENT:"instagram_content",INSTAGRAM_CONTENT_POSTS:"instagram_content_posts",INSTAGRAM_INSIGHTS:"instagram_insights",INSTAGRAM_INSIGHTS_ACTIVITY:"instagram_insights_activity",INSTAGRAM_INSIGHTS_AUDIENCE:"instagram_insights_audience",VIDPRESSO:"vidpresso",VIDPRESSO_SIGNUP:"vidpresso_signup"})}),null);
__d("XReactComposerQuestionAttachmentBootstrapController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/react_composer/question/bootstrap/",{composer_id:{type:"String",required:!0},composer_type:{type:"Enum",required:!0,enumType:1},target_id:{type:"String",required:!0}})}),null);